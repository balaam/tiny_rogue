var Module=Module;function out(text){console.log(text)}function err(text){console.error(text)}function ready(){run()}function ready(){try{if(typeof ENVIRONMENT_IS_PTHREAD==="undefined"||!ENVIRONMENT_IS_PTHREAD)run()}catch(e){if(e!=="unwind")throw e}}(function(global,module){var _allocateArrayOnHeap=function(typedArray){var requiredMemorySize=typedArray.length*typedArray.BYTES_PER_ELEMENT;var ptr=_malloc(requiredMemorySize);var heapBytes=new Uint8Array(HEAPU8.buffer,ptr,requiredMemorySize);heapBytes.set(new Uint8Array(typedArray.buffer));return heapBytes};var _allocateStringOnHeap=function(string){var bufferSize=lengthBytesUTF8(string)+1;var ptr=_malloc(bufferSize);stringToUTF8(string,ptr,bufferSize);return ptr};var _freeArrayFromHeap=function(heapBytes){if(typeof heapBytes!=="undefined")_free(heapBytes.byteOffset)};var _freeStringFromHeap=function(stringPtr){if(typeof stringPtr!=="undefined")_free(stringPtr)};var _sendMessage=function(message,intArr,floatArr,byteArray){if(!Array.isArray(intArr)){intArr=[]}if(!Array.isArray(floatArr)){floatArr=[]}if(!Array.isArray(byteArray)){byteArray=[]}var messageOnHeap,intOnHeap,floatOnHeap,bytesOnHeap;try{messageOnHeap=_allocateStringOnHeap(message);intOnHeap=_allocateArrayOnHeap(new Int32Array(intArr));floatOnHeap=_allocateArrayOnHeap(new Float32Array(floatArr));bytesOnHeap=_allocateArrayOnHeap(new Uint8Array(byteArray));_SendMessage(messageOnHeap,intOnHeap.byteOffset,intArr.length,floatOnHeap.byteOffset,floatArr.length,bytesOnHeap.byteOffset,byteArray.length)}finally{_freeStringFromHeap(messageOnHeap);_freeArrayFromHeap(intOnHeap);_freeArrayFromHeap(floatOnHeap);_freeArrayFromHeap(bytesOnHeap)}};global["SendMessage"]=_sendMessage;module["SendMessage"]=_sendMessage})(this,Module);function abort(what){throw what}var tempRet0=0;var setTempRet0=function(value){tempRet0=value};var getTempRet0=function(){return tempRet0};var UTF8Decoder=typeof TextDecoder!=="undefined"?new TextDecoder("utf8"):undefined;function UTF8ArrayToString(u8Array,idx,maxBytesToRead){var endIdx=idx+maxBytesToRead;var endPtr=idx;while(u8Array[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&u8Array.subarray&&UTF8Decoder){return UTF8Decoder.decode(u8Array.subarray(idx,endPtr))}else{var str="";while(idx<endPtr){var u0=u8Array[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=u8Array[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=u8Array[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|u8Array[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}function stringToUTF8Array(str,outU8Array,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;outU8Array[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;outU8Array[outIdx++]=192|u>>6;outU8Array[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;outU8Array[outIdx++]=224|u>>12;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;outU8Array[outIdx++]=240|u>>18;outU8Array[outIdx++]=128|u>>12&63;outU8Array[outIdx++]=128|u>>6&63;outU8Array[outIdx++]=128|u&63}}outU8Array[outIdx]=0;return outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){var len=0;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((u&1023)<<10)|str.charCodeAt(++i)&1023;if(u<=127)++len;else if(u<=2047)len+=2;else if(u<=65535)len+=3;else len+=4}return len}var GLOBAL_BASE=8,TOTAL_MEMORY=33554432,STACK_BASE=2159920,DYNAMICTOP_PTR=2159648;var buffer=new ArrayBuffer(TOTAL_MEMORY);var HEAP8=new Int8Array(buffer);var HEAP16=new Int16Array(buffer);var HEAP32=new Int32Array(buffer);var HEAPU8=new Uint8Array(buffer);var HEAPU16=new Uint16Array(buffer);var HEAPU32=new Uint32Array(buffer);var HEAPF32=new Float32Array(buffer);var HEAPF64=new Float64Array(buffer);HEAPU8.set(new Uint8Array(Module["mem"]),GLOBAL_BASE);HEAP32[DYNAMICTOP_PTR>>2]=7402800;if(!Math.imul||Math.imul(4294967295,5)!==-5)Math.imul=function imul(a,b){var ah=a>>>16;var al=a&65535;var bh=b>>>16;var bl=b&65535;return al*bl+(ah*bl+al*bh<<16)|0};if(!Math.clz32)Math.clz32=function(x){var n=32;var y=x>>16;if(y){n-=16;x=y}y=x>>8;if(y){n-=8;x=y}y=x>>4;if(y){n-=4;x=y}y=x>>2;if(y){n-=2;x=y}y=x>>1;if(y)return n-2;return n-x};if(!Math.trunc)Math.trunc=function(x){return x<0?Math.ceil(x):Math.floor(x)};var memoryInitializer=null;var ASM_CONSTS=[function(){ut._HTML.canvasContext.save()},function($0,$1,$2,$3){ut._HTML.canvasContext.beginPath();ut._HTML.canvasContext.rect($0,$1,$2,$3);ut._HTML.canvasContext.clip()},function(){ut._HTML.canvasContext.restore()},function(){if(ut._HTML.canvasMode=="webgl2")return 2;if(ut._HTML.canvasMode=="webgl")return 1;return 0}];function _emscripten_asm_const_sync_on_main_thread_i(code){return ASM_CONSTS[code]()}function _emscripten_asm_const_async_on_main_thread_vdddd(code,a0,a1,a2,a3){return ASM_CONSTS[code](a0,a1,a2,a3)}function _emscripten_asm_const_async_on_main_thread_v(code){return ASM_CONSTS[code]()}memoryInitializer="tiny_rogue.mem";var tempDoublePtr=2159904;var SYSCALLS={buffers:[null,[],[]],printChar:function(stream,curr){var buffer=SYSCALLS.buffers[stream];if(curr===0||curr===10){(stream===1?out:err)(UTF8ArrayToString(buffer,0));buffer.length=0}else{buffer.push(curr)}},varargs:0,get:function(varargs){SYSCALLS.varargs+=4;var ret=HEAP32[SYSCALLS.varargs-4>>2];return ret},getStr:function(){var ret=UTF8ToString(SYSCALLS.get());return ret},get64:function(){var low=SYSCALLS.get(),high=SYSCALLS.get();return low},getZero:function(){SYSCALLS.get()}};function ___syscall140(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(),offset_high=SYSCALLS.get(),offset_low=SYSCALLS.get(),result=SYSCALLS.get(),whence=SYSCALLS.get();var offset=offset_low;FS.llseek(stream,offset,whence);HEAP32[result>>2]=stream.position;if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function flush_NO_FILESYSTEM(){var fflush=Module["_fflush"];if(fflush)fflush(0);var buffers=SYSCALLS.buffers;if(buffers[1].length)SYSCALLS.printChar(1,10);if(buffers[2].length)SYSCALLS.printChar(2,10)}function ___syscall146(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.get(),iov=SYSCALLS.get(),iovcnt=SYSCALLS.get();var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAP32[iov+i*8>>2];var len=HEAP32[iov+(i*8+4)>>2];for(var j=0;j<len;j++){SYSCALLS.printChar(stream,HEAPU8[ptr+j])}ret+=len}return ret}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall4(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.get(),buf=SYSCALLS.get(),count=SYSCALLS.get();for(var i=0;i<count;i++){SYSCALLS.printChar(stream,HEAPU8[buf+i])}return count}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall54(which,varargs){SYSCALLS.varargs=varargs;try{return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function ___syscall6(which,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD();FS.close(stream);return 0}catch(e){if(typeof FS==="undefined"||!(e instanceof FS.ErrnoError))abort(e);return-e.errno}}function _abort(){throw"abort"}function _emscripten_is_webgl_context_lost(target){return!GL.contexts[target]||GL.contexts[target].GLctx.isContextLost()}function _emscripten_performance_now(){return performance.now()}function _emscripten_request_animation_frame_loop(cb,userData){function tick(timeStamp){if(dynCall_idi(cb,timeStamp,userData)){requestAnimationFrame(tick)}}return requestAnimationFrame(tick)}var Fetch={xhrs:[],setu64:function(addr,val){HEAPU32[addr>>2]=val;HEAPU32[addr+4>>2]=val/4294967296|0},staticInit:function(){var isMainThread=typeof ENVIRONMENT_IS_FETCH_WORKER==="undefined"}};function __emscripten_fetch_xhr(fetch,onsuccess,onerror,onprogress){var url=HEAPU32[fetch+8>>2];if(!url){onerror(fetch,0,"no url specified!");return}var url_=UTF8ToString(url);var fetch_attr=fetch+112;var requestMethod=UTF8ToString(fetch_attr);if(!requestMethod)requestMethod="GET";var userData=HEAPU32[fetch_attr+32>>2];var fetchAttributes=HEAPU32[fetch_attr+48>>2];var timeoutMsecs=HEAPU32[fetch_attr+52>>2];var withCredentials=!!HEAPU32[fetch_attr+56>>2];var destinationPath=HEAPU32[fetch_attr+60>>2];var userName=HEAPU32[fetch_attr+64>>2];var password=HEAPU32[fetch_attr+68>>2];var requestHeaders=HEAPU32[fetch_attr+72>>2];var overriddenMimeType=HEAPU32[fetch_attr+76>>2];var dataPtr=HEAPU32[fetch_attr+80>>2];var dataLength=HEAPU32[fetch_attr+84>>2];var fetchAttrLoadToMemory=!!(fetchAttributes&1);var fetchAttrStreamData=!!(fetchAttributes&2);var fetchAttrAppend=!!(fetchAttributes&8);var fetchAttrReplace=!!(fetchAttributes&16);var fetchAttrSynchronous=!!(fetchAttributes&64);var fetchAttrWaitable=!!(fetchAttributes&128);var userNameStr=userName?UTF8ToString(userName):undefined;var passwordStr=password?UTF8ToString(password):undefined;var overriddenMimeTypeStr=overriddenMimeType?UTF8ToString(overriddenMimeType):undefined;var xhr=new XMLHttpRequest;xhr.withCredentials=withCredentials;xhr.open(requestMethod,url_,!fetchAttrSynchronous,userNameStr,passwordStr);if(!fetchAttrSynchronous)xhr.timeout=timeoutMsecs;xhr.url_=url_;xhr.responseType=fetchAttrStreamData?"moz-chunked-arraybuffer":"arraybuffer";if(overriddenMimeType){xhr.overrideMimeType(overriddenMimeTypeStr)}if(requestHeaders){for(;;){var key=HEAPU32[requestHeaders>>2];if(!key)break;var value=HEAPU32[requestHeaders+4>>2];if(!value)break;requestHeaders+=8;var keyStr=UTF8ToString(key);var valueStr=UTF8ToString(value);xhr.setRequestHeader(keyStr,valueStr)}}Fetch.xhrs.push(xhr);var id=Fetch.xhrs.length;HEAPU32[fetch+0>>2]=id;var data=dataPtr&&dataLength?HEAPU8.slice(dataPtr,dataPtr+dataLength):null;xhr.onload=function(e){var len=xhr.response?xhr.response.byteLength:0;var ptr=0;var ptrLen=0;if(fetchAttrLoadToMemory&&!fetchAttrStreamData){ptrLen=len;ptr=_malloc(ptrLen);HEAPU8.set(new Uint8Array(xhr.response),ptr)}HEAPU32[fetch+12>>2]=ptr;Fetch.setu64(fetch+16,ptrLen);Fetch.setu64(fetch+24,0);if(len){Fetch.setu64(fetch+32,len)}HEAPU16[fetch+40>>1]=xhr.readyState;if(xhr.readyState===4&&xhr.status===0){if(len>0)xhr.status=200;else xhr.status=404}HEAPU16[fetch+42>>1]=xhr.status;if(xhr.statusText)stringToUTF8(xhr.statusText,fetch+44,64);if(xhr.status>=200&&xhr.status<300){if(onsuccess)onsuccess(fetch,xhr,e)}else{if(onerror)onerror(fetch,xhr,e)}};xhr.onerror=function(e){var status=xhr.status;if(xhr.readyState==4&&status==0)status=404;HEAPU32[fetch+12>>2]=0;Fetch.setu64(fetch+16,0);Fetch.setu64(fetch+24,0);Fetch.setu64(fetch+32,0);HEAPU16[fetch+40>>1]=xhr.readyState;HEAPU16[fetch+42>>1]=status;if(onerror)onerror(fetch,xhr,e)};xhr.ontimeout=function(e){if(onerror)onerror(fetch,xhr,e)};xhr.onprogress=function(e){var ptrLen=fetchAttrLoadToMemory&&fetchAttrStreamData&&xhr.response?xhr.response.byteLength:0;var ptr=0;if(fetchAttrLoadToMemory&&fetchAttrStreamData){ptr=_malloc(ptrLen);HEAPU8.set(new Uint8Array(xhr.response),ptr)}HEAPU32[fetch+12>>2]=ptr;Fetch.setu64(fetch+16,ptrLen);Fetch.setu64(fetch+24,e.loaded-ptrLen);Fetch.setu64(fetch+32,e.total);HEAPU16[fetch+40>>1]=xhr.readyState;if(xhr.readyState>=3&&xhr.status===0&&e.loaded>0)xhr.status=200;HEAPU16[fetch+42>>1]=xhr.status;if(xhr.statusText)stringToUTF8(xhr.statusText,fetch+44,64);if(onprogress)onprogress(fetch,xhr,e)};try{xhr.send(data)}catch(e){if(onerror)onerror(fetch,xhr,e)}}var _fetch_work_queue=2159888;function __emscripten_get_fetch_work_queue(){return _fetch_work_queue}function _emscripten_start_fetch(fetch,successcb,errorcb,progresscb){if(typeof Module!=="undefined")Module["noExitRuntime"]=true;var fetch_attr=fetch+112;var requestMethod=UTF8ToString(fetch_attr);var onsuccess=HEAPU32[fetch_attr+36>>2];var onerror=HEAPU32[fetch_attr+40>>2];var onprogress=HEAPU32[fetch_attr+44>>2];var fetchAttributes=HEAPU32[fetch_attr+48>>2];var fetchAttrLoadToMemory=!!(fetchAttributes&1);var fetchAttrStreamData=!!(fetchAttributes&2);var fetchAttrAppend=!!(fetchAttributes&8);var fetchAttrReplace=!!(fetchAttributes&16);var reportSuccess=function(fetch,xhr,e){if(onsuccess)dynCall_vi(onsuccess,fetch);else if(successcb)successcb(fetch)};var reportProgress=function(fetch,xhr,e){if(onprogress)dynCall_vi(onprogress,fetch);else if(progresscb)progresscb(fetch)};var reportError=function(fetch,xhr,e){if(onerror)dynCall_vi(onerror,fetch);else if(errorcb)errorcb(fetch)};__emscripten_fetch_xhr(fetch,reportSuccess,reportError,reportProgress);return fetch}function _emscripten_throw_string(str){throw UTF8ToString(str)}var GL={counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},currentContext:null,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],programInfos:{},stringCache:{},stringiCache:{},unpackAlignment:4,init:function(){GL.miniTempBuffer=new Float32Array(GL.MINI_TEMP_BUFFER_SIZE);for(var i=0;i<GL.MINI_TEMP_BUFFER_SIZE;i++){GL.miniTempBufferViews[i]=GL.miniTempBuffer.subarray(0,i+1)}},recordError:function recordError(errorCode){if(!GL.lastError){GL.lastError=errorCode}},getNewId:function(table){var ret=GL.counter++;for(var i=table.length;i<ret;i++){table[i]=null}return ret},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(shader,count,string,length){var source="";for(var i=0;i<count;++i){var len=length?HEAP32[length+i*4>>2]:-1;source+=UTF8ToString(HEAP32[string+i*4>>2],len<0?undefined:len)}return source},createContext:function(canvas,webGLContextAttributes){var ctx=webGLContextAttributes.majorVersion>1?canvas.getContext("webgl2",webGLContextAttributes):canvas.getContext("webgl",webGLContextAttributes)||canvas.getContext("experimental-webgl",webGLContextAttributes);return ctx&&GL.registerContext(ctx,webGLContextAttributes)},registerContext:function(ctx,webGLContextAttributes){var handle=_malloc(8);var context={handle:handle,attributes:webGLContextAttributes,version:webGLContextAttributes.majorVersion,GLctx:ctx};function getChromeVersion(){var raw=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return raw?parseInt(raw[2],10):false}context.supportsWebGL2EntryPoints=context.version>=2&&(getChromeVersion()===false||getChromeVersion()>=58);context.cannotHandleOffsetsInUniformArrayViews=function(g){function b(c,t){var s=g.createShader(t);g.shaderSource(s,c);g.compileShader(s);return s}try{var p=g.createProgram();g.attachShader(p,b("attribute vec4 p;void main(){gl_Position=p;}",g.VERTEX_SHADER));g.attachShader(p,b("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",g.FRAGMENT_SHADER));g.linkProgram(p);var h=new Float32Array(8);h[4]=1;g.useProgram(p);var l=g.getUniformLocation(p,"u");g.uniform4fv(l,h.subarray(4,8));return!g.getUniform(p,l)[0]}catch(e){return false}}();if(ctx.canvas)ctx.canvas.GLctxObject=context;GL.contexts[handle]=context;if(typeof webGLContextAttributes.enableExtensionsByDefault==="undefined"||webGLContextAttributes.enableExtensionsByDefault){GL.initExtensions(context)}return handle},makeContextCurrent:function(contextHandle){GL.currentContext=GL.contexts[contextHandle];Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx;return!(contextHandle&&!GLctx)},getContext:function(contextHandle){return GL.contexts[contextHandle]},deleteContext:function(contextHandle){if(GL.currentContext===GL.contexts[contextHandle])GL.currentContext=null;if(typeof JSEvents==="object")JSEvents.removeAllHandlersOnTarget(GL.contexts[contextHandle].GLctx.canvas);if(GL.contexts[contextHandle]&&GL.contexts[contextHandle].GLctx.canvas)GL.contexts[contextHandle].GLctx.canvas.GLctxObject=undefined;_free(GL.contexts[contextHandle]);GL.contexts[contextHandle]=null},initExtensions:function(context){if(!context)context=GL.currentContext;if(context.initExtensionsDone)return;context.initExtensionsDone=true;var GLctx=context.GLctx;if(context.version<2){var instancedArraysExt=GLctx.getExtension("ANGLE_instanced_arrays");if(instancedArraysExt){GLctx["vertexAttribDivisor"]=function(index,divisor){instancedArraysExt["vertexAttribDivisorANGLE"](index,divisor)};GLctx["drawArraysInstanced"]=function(mode,first,count,primcount){instancedArraysExt["drawArraysInstancedANGLE"](mode,first,count,primcount)};GLctx["drawElementsInstanced"]=function(mode,count,type,indices,primcount){instancedArraysExt["drawElementsInstancedANGLE"](mode,count,type,indices,primcount)}}var vaoExt=GLctx.getExtension("OES_vertex_array_object");if(vaoExt){GLctx["createVertexArray"]=function(){return vaoExt["createVertexArrayOES"]()};GLctx["deleteVertexArray"]=function(vao){vaoExt["deleteVertexArrayOES"](vao)};GLctx["bindVertexArray"]=function(vao){vaoExt["bindVertexArrayOES"](vao)};GLctx["isVertexArray"]=function(vao){return vaoExt["isVertexArrayOES"](vao)}}var drawBuffersExt=GLctx.getExtension("WEBGL_draw_buffers");if(drawBuffersExt){GLctx["drawBuffers"]=function(n,bufs){drawBuffersExt["drawBuffersWEBGL"](n,bufs)}}}GLctx.disjointTimerQueryExt=GLctx.getExtension("EXT_disjoint_timer_query");var automaticallyEnabledExtensions=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"];var exts=GLctx.getSupportedExtensions();if(exts&&exts.length>0){GLctx.getSupportedExtensions().forEach(function(ext){if(automaticallyEnabledExtensions.indexOf(ext)!=-1){GLctx.getExtension(ext)}})}},populateUniformTable:function(program){var p=GL.programs[program];var ptable=GL.programInfos[program]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1};var utable=ptable.uniforms;var numUniforms=GLctx.getProgramParameter(p,35718);for(var i=0;i<numUniforms;++i){var u=GLctx.getActiveUniform(p,i);var name=u.name;ptable.maxUniformLength=Math.max(ptable.maxUniformLength,name.length+1);if(name.slice(-1)=="]"){name=name.slice(0,name.lastIndexOf("["))}var loc=GLctx.getUniformLocation(p,name);if(loc){var id=GL.getNewId(GL.uniforms);utable[name]=[u.size,id];GL.uniforms[id]=loc;for(var j=1;j<u.size;++j){var n=name+"["+j+"]";loc=GLctx.getUniformLocation(p,n);id=GL.getNewId(GL.uniforms);GL.uniforms[id]=loc}}}}};var JSEvents={keyEvent:0,mouseEvent:0,wheelEvent:0,uiEvent:0,focusEvent:0,deviceOrientationEvent:0,deviceMotionEvent:0,fullscreenChangeEvent:0,pointerlockChangeEvent:0,visibilityChangeEvent:0,touchEvent:0,previousFullscreenElement:null,previousScreenX:null,previousScreenY:null,removeEventListenersRegistered:false,removeAllEventListeners:function(){for(var i=JSEvents.eventHandlers.length-1;i>=0;--i){JSEvents._removeHandler(i)}JSEvents.eventHandlers=[];JSEvents.deferredCalls=[]},deferredCalls:[],deferCall:function(targetFunction,precedence,argsList){function arraysHaveEqualContent(arrA,arrB){if(arrA.length!=arrB.length)return false;for(var i in arrA){if(arrA[i]!=arrB[i])return false}return true}for(var i in JSEvents.deferredCalls){var call=JSEvents.deferredCalls[i];if(call.targetFunction==targetFunction&&arraysHaveEqualContent(call.argsList,argsList)){return}}JSEvents.deferredCalls.push({targetFunction:targetFunction,precedence:precedence,argsList:argsList});JSEvents.deferredCalls.sort(function(x,y){return x.precedence<y.precedence})},removeDeferredCalls:function(targetFunction){for(var i=0;i<JSEvents.deferredCalls.length;++i){if(JSEvents.deferredCalls[i].targetFunction==targetFunction){JSEvents.deferredCalls.splice(i,1);--i}}},canPerformEventHandlerRequests:function(){return JSEvents.inEventHandler&&JSEvents.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(!JSEvents.canPerformEventHandlerRequests()){return}for(var i=0;i<JSEvents.deferredCalls.length;++i){var call=JSEvents.deferredCalls[i];JSEvents.deferredCalls.splice(i,1);--i;call.targetFunction.apply(this,call.argsList)}},inEventHandler:0,currentEventHandler:null,eventHandlers:[],isInternetExplorer:function(){return navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0},removeAllHandlersOnTarget:function(target,eventTypeString){for(var i=0;i<JSEvents.eventHandlers.length;++i){if(JSEvents.eventHandlers[i].target==target&&(!eventTypeString||eventTypeString==JSEvents.eventHandlers[i].eventTypeString)){JSEvents._removeHandler(i--)}}},_removeHandler:function(i){var h=JSEvents.eventHandlers[i];h.target.removeEventListener(h.eventTypeString,h.eventListenerFunc,h.useCapture);JSEvents.eventHandlers.splice(i,1)},registerOrRemoveHandler:function(eventHandler){var jsEventHandler=function jsEventHandler(event){++JSEvents.inEventHandler;JSEvents.currentEventHandler=eventHandler;JSEvents.runDeferredCalls();eventHandler.handlerFunc(event);JSEvents.runDeferredCalls();--JSEvents.inEventHandler};if(eventHandler.callbackfunc){eventHandler.eventListenerFunc=jsEventHandler;eventHandler.target.addEventListener(eventHandler.eventTypeString,jsEventHandler,eventHandler.useCapture);JSEvents.eventHandlers.push(eventHandler)}else{for(var i=0;i<JSEvents.eventHandlers.length;++i){if(JSEvents.eventHandlers[i].target==eventHandler.target&&JSEvents.eventHandlers[i].eventTypeString==eventHandler.eventTypeString){JSEvents._removeHandler(i--)}}}},getBoundingClientRectOrZeros:function(target){return target.getBoundingClientRect?target.getBoundingClientRect():{left:0,top:0}},pageScrollPos:function(){if(pageXOffset>0||pageYOffset>0){return[pageXOffset,pageYOffset]}if(typeof document.documentElement.scrollLeft!=="undefined"||typeof document.documentElement.scrollTop!=="undefined"){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}return[document.body.scrollLeft|0,document.body.scrollTop|0]},getNodeNameForTarget:function(target){if(!target)return"";if(target==window)return"#window";if(target==screen)return"#screen";return target&&target.nodeName?target.nodeName:""},tick:function(){if(window["performance"]&&window["performance"]["now"])return window["performance"]["now"]();else return Date.now()},fullscreenEnabled:function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled}};var __emscripten_webgl_power_preferences=["default","low-power","high-performance"];function __maybeCStringToJsString(cString){return cString===cString+0?UTF8ToString(cString):cString}var __specialEventTargets=[0,document,window];function __findEventTarget(target){var domElement=__specialEventTargets[target]||document.querySelector(__maybeCStringToJsString(target));return domElement}function __findCanvasEventTarget(target){return __findEventTarget(target)}function _emscripten_webgl_do_create_context(target,attributes){var contextAttributes={};var a=attributes>>2;contextAttributes["alpha"]=!!HEAP32[a+(0>>2)];contextAttributes["depth"]=!!HEAP32[a+(4>>2)];contextAttributes["stencil"]=!!HEAP32[a+(8>>2)];contextAttributes["antialias"]=!!HEAP32[a+(12>>2)];contextAttributes["premultipliedAlpha"]=!!HEAP32[a+(16>>2)];contextAttributes["preserveDrawingBuffer"]=!!HEAP32[a+(20>>2)];var powerPreference=HEAP32[a+(24>>2)];contextAttributes["powerPreference"]=__emscripten_webgl_power_preferences[powerPreference];contextAttributes["failIfMajorPerformanceCaveat"]=!!HEAP32[a+(28>>2)];contextAttributes.majorVersion=HEAP32[a+(32>>2)];contextAttributes.minorVersion=HEAP32[a+(36>>2)];contextAttributes.enableExtensionsByDefault=HEAP32[a+(40>>2)];contextAttributes.explicitSwapControl=HEAP32[a+(44>>2)];contextAttributes.proxyContextToMainThread=HEAP32[a+(48>>2)];contextAttributes.renderViaOffscreenBackBuffer=HEAP32[a+(52>>2)];var canvas=__findCanvasEventTarget(target);if(!canvas){return 0}if(contextAttributes.explicitSwapControl){return 0}var contextHandle=GL.createContext(canvas,contextAttributes);return contextHandle}function _emscripten_webgl_create_context(a0,a1){return _emscripten_webgl_do_create_context(a0,a1)}function _emscripten_webgl_init_context_attributes(attributes){var a=attributes>>2;for(var i=0;i<56>>2;++i){HEAP32[a+i]=0}HEAP32[a+(0>>2)]=HEAP32[a+(4>>2)]=HEAP32[a+(12>>2)]=HEAP32[a+(16>>2)]=HEAP32[a+(32>>2)]=HEAP32[a+(40>>2)]=1}function _emscripten_webgl_make_context_current(contextHandle){var success=GL.makeContextCurrent(contextHandle);return success?0:-5}function _exit(status){throw"exit("+status+")"}function _glAttachShader(program,shader){GLctx.attachShader(GL.programs[program],GL.shaders[shader])}function _glBindAttribLocation(program,index,name){GLctx.bindAttribLocation(GL.programs[program],index,UTF8ToString(name))}function _glBindBuffer(target,buffer){if(target==35051){GLctx.currentPixelPackBufferBinding=buffer}else if(target==35052){GLctx.currentPixelUnpackBufferBinding=buffer}GLctx.bindBuffer(target,GL.buffers[buffer])}function _glBindTexture(target,texture){GLctx.bindTexture(target,GL.textures[texture])}function _glBlendFuncSeparate(x0,x1,x2,x3){GLctx["blendFuncSeparate"](x0,x1,x2,x3)}function _glBufferData(target,size,data,usage){if(GL.currentContext.supportsWebGL2EntryPoints){if(data){GLctx.bufferData(target,HEAPU8,usage,data,size)}else{GLctx.bufferData(target,size,usage)}}else{GLctx.bufferData(target,data?HEAPU8.subarray(data,data+size):size,usage)}}function _glBufferSubData(target,offset,size,data){if(GL.currentContext.supportsWebGL2EntryPoints){GLctx.bufferSubData(target,offset,HEAPU8,data,size);return}GLctx.bufferSubData(target,offset,HEAPU8.subarray(data,data+size))}function _glClear(x0){GLctx["clear"](x0)}function _glClearColor(x0,x1,x2,x3){GLctx["clearColor"](x0,x1,x2,x3)}function _glCompileShader(shader){GLctx.compileShader(GL.shaders[shader])}function _glCreateProgram(){var id=GL.getNewId(GL.programs);var program=GLctx.createProgram();program.name=id;GL.programs[id]=program;return id}function _glCreateShader(shaderType){var id=GL.getNewId(GL.shaders);GL.shaders[id]=GLctx.createShader(shaderType);return id}function _glDeleteProgram(id){if(!id)return;var program=GL.programs[id];if(!program){GL.recordError(1281);return}GLctx.deleteProgram(program);program.name=0;GL.programs[id]=null;GL.programInfos[id]=null}function _glDeleteShader(id){if(!id)return;var shader=GL.shaders[id];if(!shader){GL.recordError(1281);return}GLctx.deleteShader(shader);GL.shaders[id]=null}function _glDeleteTextures(n,textures){for(var i=0;i<n;i++){var id=HEAP32[textures+i*4>>2];var texture=GL.textures[id];if(!texture)continue;GLctx.deleteTexture(texture);texture.name=0;GL.textures[id]=null}}function _glDisable(x0){GLctx["disable"](x0)}function _glDisableVertexAttribArray(index){GLctx.disableVertexAttribArray(index)}function _glDrawArrays(mode,first,count){GLctx.drawArrays(mode,first,count)}function _glDrawElements(mode,count,type,indices){GLctx.drawElements(mode,count,type,indices)}function _glEnable(x0){GLctx["enable"](x0)}function _glEnableVertexAttribArray(index){GLctx.enableVertexAttribArray(index)}function __glGenObject(n,buffers,createFunction,objectTable){for(var i=0;i<n;i++){var buffer=GLctx[createFunction]();var id=buffer&&GL.getNewId(objectTable);if(buffer){buffer.name=id;objectTable[id]=buffer}else{GL.recordError(1282)}HEAP32[buffers+i*4>>2]=id}}function _glGenBuffers(n,buffers){__glGenObject(n,buffers,"createBuffer",GL.buffers)}function _glGenTextures(n,textures){__glGenObject(n,textures,"createTexture",GL.textures)}function _glGetProgramInfoLog(program,maxLength,length,infoLog){var log=GLctx.getProgramInfoLog(GL.programs[program]);if(log===null)log="(unknown error)";var numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;if(length)HEAP32[length>>2]=numBytesWrittenExclNull}function _glGetProgramiv(program,pname,p){if(!p){GL.recordError(1281);return}if(program>=GL.counter){GL.recordError(1281);return}var ptable=GL.programInfos[program];if(!ptable){GL.recordError(1282);return}if(pname==35716){var log=GLctx.getProgramInfoLog(GL.programs[program]);if(log===null)log="(unknown error)";HEAP32[p>>2]=log.length+1}else if(pname==35719){HEAP32[p>>2]=ptable.maxUniformLength}else if(pname==35722){if(ptable.maxAttributeLength==-1){program=GL.programs[program];var numAttribs=GLctx.getProgramParameter(program,35721);ptable.maxAttributeLength=0;for(var i=0;i<numAttribs;++i){var activeAttrib=GLctx.getActiveAttrib(program,i);ptable.maxAttributeLength=Math.max(ptable.maxAttributeLength,activeAttrib.name.length+1)}}HEAP32[p>>2]=ptable.maxAttributeLength}else if(pname==35381){if(ptable.maxUniformBlockNameLength==-1){program=GL.programs[program];var numBlocks=GLctx.getProgramParameter(program,35382);ptable.maxUniformBlockNameLength=0;for(var i=0;i<numBlocks;++i){var activeBlockName=GLctx.getActiveUniformBlockName(program,i);ptable.maxUniformBlockNameLength=Math.max(ptable.maxUniformBlockNameLength,activeBlockName.length+1)}}HEAP32[p>>2]=ptable.maxUniformBlockNameLength}else{HEAP32[p>>2]=GLctx.getProgramParameter(GL.programs[program],pname)}}function _glGetShaderInfoLog(shader,maxLength,length,infoLog){var log=GLctx.getShaderInfoLog(GL.shaders[shader]);if(log===null)log="(unknown error)";var numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;if(length)HEAP32[length>>2]=numBytesWrittenExclNull}function _glGetShaderiv(shader,pname,p){if(!p){GL.recordError(1281);return}if(pname==35716){var log=GLctx.getShaderInfoLog(GL.shaders[shader]);if(log===null)log="(unknown error)";HEAP32[p>>2]=log.length+1}else if(pname==35720){var source=GLctx.getShaderSource(GL.shaders[shader]);var sourceLength=source===null||source.length==0?0:source.length+1;HEAP32[p>>2]=sourceLength}else{HEAP32[p>>2]=GLctx.getShaderParameter(GL.shaders[shader],pname)}}function _glGetUniformLocation(program,name){name=UTF8ToString(name);var arrayIndex=0;if(name[name.length-1]=="]"){var leftBrace=name.lastIndexOf("[");arrayIndex=name[leftBrace+1]!="]"?parseInt(name.slice(leftBrace+1)):0;name=name.slice(0,leftBrace)}var uniformInfo=GL.programInfos[program]&&GL.programInfos[program].uniforms[name];if(uniformInfo&&arrayIndex>=0&&arrayIndex<uniformInfo[0]){return uniformInfo[1]+arrayIndex}else{return-1}}function _glLinkProgram(program){GLctx.linkProgram(GL.programs[program]);GL.populateUniformTable(program)}function _glPixelStorei(pname,param){if(pname==3317){GL.unpackAlignment=param}GLctx.pixelStorei(pname,param)}function _glScissor(x0,x1,x2,x3){GLctx["scissor"](x0,x1,x2,x3)}function _glShaderSource(shader,count,string,length){var source=GL.getSource(shader,count,string,length);GLctx.shaderSource(GL.shaders[shader],source)}function _glTexParameteri(x0,x1,x2){GLctx["texParameteri"](x0,x1,x2)}function _glUniform1i(location,v0){GLctx.uniform1i(GL.uniforms[location],v0)}function _glUniform3fv(location,count,value){if(GL.currentContext.supportsWebGL2EntryPoints){GLctx.uniform3fv(GL.uniforms[location],HEAPF32,value>>2,count*3);return}if(3*count<=GL.MINI_TEMP_BUFFER_SIZE){var view=GL.miniTempBufferViews[3*count-1];for(var i=0;i<3*count;i+=3){view[i]=HEAPF32[value+4*i>>2];view[i+1]=HEAPF32[value+(4*i+4)>>2];view[i+2]=HEAPF32[value+(4*i+8)>>2]}}else{var view=HEAPF32.subarray(value>>2,value+count*12>>2);if(GL.currentContext.cannotHandleOffsetsInUniformArrayViews)view=new Float32Array(view)}GLctx.uniform3fv(GL.uniforms[location],view)}function _glUniform4fv(location,count,value){if(GL.currentContext.supportsWebGL2EntryPoints){GLctx.uniform4fv(GL.uniforms[location],HEAPF32,value>>2,count*4);return}if(4*count<=GL.MINI_TEMP_BUFFER_SIZE){var view=GL.miniTempBufferViews[4*count-1];for(var i=0;i<4*count;i+=4){view[i]=HEAPF32[value+4*i>>2];view[i+1]=HEAPF32[value+(4*i+4)>>2];view[i+2]=HEAPF32[value+(4*i+8)>>2];view[i+3]=HEAPF32[value+(4*i+12)>>2]}}else{var view=HEAPF32.subarray(value>>2,value+count*16>>2);if(GL.currentContext.cannotHandleOffsetsInUniformArrayViews)view=new Float32Array(view)}GLctx.uniform4fv(GL.uniforms[location],view)}function _glUniformMatrix3fv(location,count,transpose,value){if(GL.currentContext.supportsWebGL2EntryPoints){GLctx.uniformMatrix3fv(GL.uniforms[location],!!transpose,HEAPF32,value>>2,count*9);return}if(9*count<=GL.MINI_TEMP_BUFFER_SIZE){var view=GL.miniTempBufferViews[9*count-1];for(var i=0;i<9*count;i+=9){view[i]=HEAPF32[value+4*i>>2];view[i+1]=HEAPF32[value+(4*i+4)>>2];view[i+2]=HEAPF32[value+(4*i+8)>>2];view[i+3]=HEAPF32[value+(4*i+12)>>2];view[i+4]=HEAPF32[value+(4*i+16)>>2];view[i+5]=HEAPF32[value+(4*i+20)>>2];view[i+6]=HEAPF32[value+(4*i+24)>>2];view[i+7]=HEAPF32[value+(4*i+28)>>2];view[i+8]=HEAPF32[value+(4*i+32)>>2]}}else{var view=HEAPF32.subarray(value>>2,value+count*36>>2);if(GL.currentContext.cannotHandleOffsetsInUniformArrayViews)view=new Float32Array(view)}GLctx.uniformMatrix3fv(GL.uniforms[location],!!transpose,view)}function _glUseProgram(program){GLctx.useProgram(GL.programs[program])}function _glVertexAttribPointer(index,size,type,normalized,stride,ptr){GLctx.vertexAttribPointer(index,size,type,!!normalized,stride,ptr)}function _glViewport(x0,x1,x2,x3){GLctx["viewport"](x0,x1,x2,x3)}function _js_canvasBlendingAndSmoothing(blend,smooth){var context=ut._HTML.canvasContext;context.globalCompositeOperation=["source-over","lighter","multiply","destination-in"][blend];context.imageSmoothingEnabled=smooth}function _js_canvasClear(r,g,b,a,w,h){var cx=ut._HTML.canvasContext;cx.globalCompositeOperation="copy";cx.globalAlpha=1;cx.fillStyle="rgba("+(r|0)+", "+(g|0)+", "+(b|0)+", "+a+")";cx.fillRect(0,0,w,h)}function _js_canvasInit(){var cx=ut._HTML.canvasContext;if(!cx||!cx.save)return false;cx.save();cx.globalCompositeOperation="multiply";ut._HTML.supportMultiply=cx.globalCompositeOperation=="multiply";cx.restore();return true}function _js_canvasMakePattern(tintedIndex){var context=ut._HTML.canvasContext;var img=ut._HTML.tintedSprites[tintedIndex].image;ut._HTML.tintedSprites[tintedIndex].pattern=context.createPattern(img,"repeat")}function _js_canvasMakeTintedSprite(imageIndex,sx,sy,sw,sh,r,g,b){var context=ut._HTML.canvasContext;var canvas=document.createElement("canvas");canvas.width=sw;canvas.height=sh;var cx=canvas.getContext("2d");var srcimg=ut._HTML.images[imageIndex].image;cx.globalCompositeOperation="copy";cx.drawImage(srcimg,sx,sy,sw,sh,0,0,sw,sh);if((r&g&b)!==255){if(!ut._HTML.supportMultiply){var imd=cx.getImageData(0,0,sw,sh);var s=sw*sh*4;var da=imd.data;var scaleR=r/255*256|0;var scaleG=g/255*256|0;var scaleB=b/255*256|0;for(var i=0;i<s;i+=4){da[i]=da[i]*scaleR>>8;da[i+1]=da[i+1]*scaleG>>8;da[i+2]=da[i+2]*scaleB>>8}cx.putImageData(imd,0,0)}else{cx.globalCompositeOperation="multiply";cx.fillStyle="rgb("+(r|0)+","+(g|0)+","+(b|0)+")";cx.fillRect(0,0,sw,sh);cx.globalCompositeOperation="destination-in";cx.drawImage(srcimg,sx,sy,sw,sh,0,0,sw,sh)}}var idx;if(ut._HTML.tintedSpritesFreeList.length===0)idx=ut._HTML.tintedSprites.length;else idx=ut._HTML.tintedSpritesFreeList.pop();ut._HTML.tintedSprites[idx]={image:canvas,pattern:null};return idx}function _js_canvasReleaseTintedSprite(tintedIndex){ut._HTML.tintedSprites[tintedIndex]=null;ut._HTML.tintedSpritesFreeList.push(tintedIndex)}function _js_canvasRenderMultipleSliced(tintIndex,imageIndex,v,n,alpha){var cx=ut._HTML.canvasContext;cx.globalAlpha=alpha;var img=tintIndex>0?ut._HTML.tintedSprites[tintIndex].image:ut._HTML.images[imageIndex].image;var i8=v>>2;for(var i=0;i<n;i++){if(HEAPF32[i8+2]>0&&HEAPF32[i8+3]>0)cx.drawImage(img,HEAPF32[i8],HEAPF32[i8+1],HEAPF32[i8+2],HEAPF32[i8+3],HEAPF32[i8+4],-HEAPF32[i8+7]-HEAPF32[i8+5],HEAPF32[i8+6],HEAPF32[i8+7]);i8+=8}}function _js_canvasRenderNormalSpriteTinted(txa,txb,txc,txd,txe,txf,alpha,tintedIndex,x,y,w,h){var context=ut._HTML.canvasContext;context.setTransform(txa,txb,txc,txd,txe,txf);context.globalAlpha=alpha;context.drawImage(ut._HTML.tintedSprites[tintedIndex].image,x,y,w,h)}function _js_canvasRenderNormalSpriteWhite(txa,txb,txc,txd,txe,txf,alpha,imageIndex,sx,sy,sw,sh,x,y,w,h){var context=ut._HTML.canvasContext;context.setTransform(txa,txb,txc,txd,txe,txf);context.globalAlpha=alpha;context.drawImage(ut._HTML.images[imageIndex].image,sx,sy,sw,sh,x,y,w,h)}function _js_canvasRenderPatternSprite(patternIdx,x,y,w,h,txa,txb,txc,txd,txe,txf,alpha){var cx=ut._HTML.canvasContext;cx.globalAlpha=alpha;cx.save();cx.beginPath();cx.rect(x,y,w,h);cx.clip();cx.setTransform(txa,txb,txc,txd,txe,txf);cx.fillStyle=ut._HTML.tintedSprites[patternIdx].pattern;cx.fillRect(0,-1e4,1e4,1e4);cx.restore()}function _js_canvasSetTransformOnly(txa,txb,txc,txd,txe,txf){var context=ut._HTML.canvasContext;context.setTransform(txa,txb,txc,txd,txe,txf)}function _js_check_isPlaying(index){if(!ut._HTML.videoSourcePlaying||index<0||ut._HTML.videoSourcePlaying[index]==null)return 0;if(ut._HTML.videoSourcePlaying[index].status==="not_playing")return 0;if(ut._HTML.videoSourcePlaying[index].status==="playing")return 1;if(ut._HTML.videoSourcePlaying[index].status==="done_playing")return 2;return 0}function _js_check_loading(index){if(!ut._HTML.videoSourceLoading||index<0||ut._HTML.videoSourceLoading[index]==null)return-1;if(ut._HTML.videoSourceLoading[index].status==="error")return 0;if(ut._HTML.videoSourceLoading[index].status==="loading")return 1;if(ut._HTML.videoSourceLoading[index].status==="loaded")return 2;return-1}function _js_create_video_element(videoFileName,controls,loop,left,top,width,height){var index=0;for(var i=0;i<=ut._HTML.videoSourceLoading.length;i++){if(!ut._HTML.videoSourceLoading[i]){index=i;break}}var videoElement=document.getElementById("video-entity-"+index);if(!videoElement){videoElement=window.document.createElement("video");videoElement.setAttribute("id","video-entity-"+index);videoElement.autoplay=true;var defaultText=document.createTextNode("Your browser doesn't support this media format.");videoElement.appendChild(defaultText);document.body.appendChild(videoElement)}var url=UTF8ToString(videoFileName);if(url.substring(0,9)==="ut-asset:")url=UT_ASSETS[url.substring(9)];videoElement.setAttribute("src",url);videoElement.setAttribute("preload","metadata");ut._HTML.videoSourceLoading[index]={};ut._HTML.videoSourcePlaying[index]={};ut._HTML.videoSourceLoading[index].status="loading";ut._HTML.videoSourcePlaying[index].status="not_playing";videoElement.onloadeddata=function(){if(ut._HTML.videoSourceLoading[index]!=null)ut._HTML.videoSourceLoading[index].status="loaded";if(ut._HTML.videoSourcePlaying[index]!=null){ut._HTML.videoSourcePlaying[index].status="playing";ut._HTML.videoSourcePlaying[index].currentTime=0}};videoElement.onerror=function(){console.log("[Video] Failed to load error:"+videoElement.error.code+" message: "+videoElement.error.message);ut._HTML.videoSourceLoading[index].status="error"};videoElement.width=width;videoElement.height=height;videoElement.style.position="absolute";videoElement.style.top=left+"px";videoElement.style.left=top+"px";videoElement.style.zIndex=100;videoElement.style.backgroundColor="black";videoElement.controls=controls;videoElement.loop=loop;videoElement.muted=true;videoElement.onended=function(){ut._HTML.videoSourcePlaying[index].status="done_playing"};videoElement.ontimeupdate=function(){ut._HTML.videoSourcePlaying[index].currentTime=videoElement.currentTime};return index}function _js_getCurrentTime(index){if(!ut._HTML.videoSourcePlaying||index<0||ut._HTML.videoSourcePlaying[index]==null)return 0;if(ut._HTML.videoSourcePlaying[index].status===1)return ut._HTML.videoSourcePlaying[index].currentTime;return 0}function _js_html_audioCheckLoad(audioClipIdx){var WORKING_ON_IT=0;var SUCCESS=1;var FAILED=2;if(!this.audioContext||audioClipIdx<0)return FAILED;if(this.audioBuffers[audioClipIdx]==null)return FAILED;if(this.audioBuffers[audioClipIdx]==="loading")return WORKING_ON_IT;if(this.audioBuffers[audioClipIdx]==="error")return FAILED;return SUCCESS}function _js_html_audioFree(audioClipIdx){var audioBuffer=this.audioBuffers[audioClipIdx];if(!audioBuffer)return;for(var i=0;i<this.audioSources.length;++i){var sourceNode=this.audioSources[i];if(sourceNode&&sourceNode.buffer===audioBuffer)sourceNode.stop()}this.audioBuffers[audioClipIdx]=null}function _js_html_audioIsPlaying(audioSourceIdx){if(!this.audioContext||audioSourceIdx<0)return false;if(this.audioSources[audioSourceIdx]==null)return false;return this.audioSources[audioSourceIdx].isPlaying}function _js_html_audioIsUnlocked(){return this.unlocked}function _js_html_audioPause(){if(!this.audioContext)return;this.audioContext.suspend()}function _js_html_audioPlay(audioClipIdx,audioSourceIdx,volume,loop){if(!this.audioContext||audioClipIdx<0||audioSourceIdx<0)return false;if(this.audioContext.state!=="running")return false;var srcBuffer=this.audioBuffers[audioClipIdx];if(!srcBuffer||typeof srcBuffer==="string")return false;var sourceNode=this.audioContext.createBufferSource();sourceNode.buffer=srcBuffer;if(volume!==1){var gainNode=this.audioContext.createGain();gainNode.gain.setValueAtTime(volume,0);sourceNode.connect(gainNode);gainNode.connect(this.audioContext.destination)}else{sourceNode.connect(this.audioContext.destination)}sourceNode.loop=loop;this.stop(audioSourceIdx,true);this.audioSources[audioSourceIdx]=sourceNode;var self=this;sourceNode.onended=function(event){self.stop(audioSourceIdx,false);sourceNode.isPlaying=false};sourceNode.start();sourceNode.isPlaying=true;return true}function _js_html_audioResume(){if(!this.audioContext||typeof this.audioContext.resume!=="function")return;this.audioContext.resume()}function _js_html_audioStartLoadFile(audioClipName,audioClipIdx){if(!this.audioContext||audioClipIdx<0)return-1;audioClipName=UTF8ToString(audioClipName);var url=audioClipName;if(url.substring(0,9)==="ut-asset:")url=UT_ASSETS[url.substring(9)];var self=this;var request=new XMLHttpRequest;self.audioBuffers[audioClipIdx]="loading";request.open("GET",url,true);request.responseType="arraybuffer";request.onload=function(){self.audioContext.decodeAudioData(request.response,function(buffer){self.audioBuffers[audioClipIdx]=buffer})};request.onerror=function(){self.audioBuffers[audioClipIdx]="error"};try{request.send()}catch(e){self.audioBuffers[audioClipIdx]="error"}return audioClipIdx}function _js_html_audioStop(audioSourceIdx,dostop){if(!this.audioContext||audioSourceIdx<0)return;var sourceNode=this.audioSources[audioSourceIdx];if(!sourceNode)return;sourceNode.onended=null;this.audioSources[audioSourceIdx]=null;if(dostop){sourceNode.stop();sourceNode.isPlaying=false}}function _js_html_audioUnlock(){var self=this;if(self.unlocked||!self.audioContext||typeof self.audioContext.resume!=="function")return;document.addEventListener("click",ut._HTML.unlock,true);document.addEventListener("touchstart",ut._HTML.unlock,true);document.addEventListener("touchend",ut._HTML.unlock,true);document.addEventListener("keydown",ut._HTML.unlock,true);document.addEventListener("keyup",ut._HTML.unlock,true)}function _js_html_checkLoadImage(idx){var img=ut._HTML.images[idx];if(img.loaderror){return 2}if(img.image){if(!img.image.complete||!img.image.naturalWidth||!img.image.naturalHeight)return 0}if(img.mask){if(!img.mask.complete||!img.mask.naturalWidth||!img.mask.naturalHeight)return 0}return 1}function _js_html_extractAlphaFromImage(idx,destPtr,w,h){var cvs=document.createElement("canvas");cvs.width=w;cvs.height=h;var cx=cvs.getContext("2d");var srcimg=ut._HTML.images[idx].image;cx.globalCompositeOperation="copy";cx.drawImage(srcimg,0,0,w,h);var pixels=cx.getImageData(0,0,w,h);var src=pixels.data;for(var o=0;o<w*h;o++)HEAPU8[destPtr+o]=src[o*4+3]}function _js_html_finishLoadImage(idx,wPtr,hPtr,alphaPtr){var img=ut._HTML.images[idx];if(img.image&&img.mask){var width=img.image.naturalWidth;var height=img.image.naturalHeight;var maskwidth=img.mask.naturalWidth;var maskheight=img.mask.naturalHeight;var cvscolor=document.createElement("canvas");cvscolor.width=width;cvscolor.height=height;var cxcolor=cvscolor.getContext("2d");cxcolor.globalCompositeOperation="copy";cxcolor.drawImage(img.image,0,0);var cvsalpha=document.createElement("canvas");cvsalpha.width=width;cvsalpha.height=height;var cxalpha=cvsalpha.getContext("2d");cxalpha.globalCompositeOperation="copy";cxalpha.drawImage(img.mask,0,0,width,height);var colorBits=cxcolor.getImageData(0,0,width,height);var alphaBits=cxalpha.getImageData(0,0,width,height);var cdata=colorBits.data,adata=alphaBits.data;var sz=width*height;for(var i=0;i<sz;i++)cdata[(i<<2)+3]=adata[i<<2];cxcolor.putImageData(colorBits,0,0);img.image=cvscolor;img.image.naturalWidth=width;img.image.naturalHeight=height;img.hasAlpha=true}else if(!img.image&&img.mask){var width=img.mask.naturalWidth;var height=img.mask.naturalHeight;var cvscolor=document.createElement("canvas");cvscolor.width=width;cvscolor.height=height;var cxcolor=cvscolor.getContext("2d");cxcolor.globalCompositeOperation="copy";cxcolor.drawImage(img.mask,0,0);var colorBits=cxcolor.getImageData(0,0,width,height);var cdata=colorBits.data;var sz=width*height;for(var i=0;i<sz;i++){cdata[(i<<2)+1]=cdata[i<<2];cdata[(i<<2)+2]=cdata[i<<2];cdata[(i<<2)+3]=cdata[i<<2]}cxcolor.putImageData(colorBits,0,0);img.image=cvscolor;img.image.naturalWidth=width;img.image.naturalHeight=height;img.hasAlpha=true}HEAP32[wPtr>>2]=img.image.naturalWidth;HEAP32[hPtr>>2]=img.image.naturalHeight;HEAP32[alphaPtr>>2]=img.hasAlpha}function _js_html_freeImage(idx){ut._HTML.images[idx]=null}function _js_html_getCanvasSize(wPtr,hPtr){var html=ut._HTML;HEAP32[wPtr>>2]=html.canvasElement.width|0;HEAP32[hPtr>>2]=html.canvasElement.height|0}function _js_html_getFrameSize(wPtr,hPtr){HEAP32[wPtr>>2]=window.innerWidth|0;HEAP32[hPtr>>2]=window.innerHeight|0}function _js_html_getScreenSize(wPtr,hPtr){HEAP32[wPtr>>2]=screen.width|0;HEAP32[hPtr>>2]=screen.height|0}function _js_html_init(){ut=ut||{};ut._HTML=ut._HTML||{};var html=ut._HTML;html.visible=true;html.focused=true}function _js_html_initAudio(){ut=ut||{};ut._HTML=ut._HTML||{};ut._HTML.unlock=function(){if(!self.audioContext)return;self.audioContext.resume();var source=self.audioContext.createBufferSource();source.buffer=self.audioContext.createBuffer(1,1,22050);source.connect(self.audioContext.destination);if(typeof source.start==="undefined"){source.noteOn(0)}else{source.start(0)}self.audioContext.resume();source.onended=function(){source.disconnect(0);self.unlocked=true;document.removeEventListener("click",ut._HTML.unlock,true);document.removeEventListener("touchstart",ut._HTML.unlock,true);document.removeEventListener("touchend",ut._HTML.unlock,true);document.removeEventListener("keydown",ut._HTML.unlock,true);document.removeEventListener("keyup",ut._HTML.unlock,true)}};if(!window.AudioContext&&!window.webkitAudioContext)return false;var audioContext=new(window.AudioContext||window.webkitAudioContext);if(!audioContext)return false;this.audioContext=audioContext;this.audioBuffers={};this.audioSources={};this.unlocked=false;var navigator=typeof window!=="undefined"&&window.navigator?window.navigator:null;var isMobile=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(navigator&&navigator.userAgent);var isTouch=!!(isMobile||navigator&&navigator.maxTouchPoints>0||navigator&&navigator.msMaxTouchPoints>0);if(this.audioContext.state!=="running"||isMobile||isTouch){ut._HTML.unlock()}else{this.unlocked=true}return true}function _js_html_initImageLoading(){ut=ut||{};ut._HTML=ut._HTML||{};ut._HTML.images=[null];ut._HTML.tintedSprites=[null];ut._HTML.tintedSpritesFreeList=[];ut._HTML.initImage=function(idx){ut._HTML.images[idx]={image:null,mask:null,loaderror:false,hasAlpha:true,glTexture:null,glDisableSmoothing:false}};ut._HTML.ensureImageIsReadable=function(idx,w,h){if(ut._HTML.canvasMode=="webgl2"||ut._HTML.canvasMode=="webgl"){var gl=ut._HTML.canvasContext;if(ut._HTML.images[idx].isrt){if(!ut._HTML.images[idx].glTexture)return false;var pixels=new Uint8Array(w*h*4);var fbo=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,fbo);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,ut._HTML.images[idx].glTexture,0);gl.viewport(0,0,w,h);if(gl.checkFramebufferStatus(gl.FRAMEBUFFER)==gl.FRAMEBUFFER_COMPLETE){gl.readPixels(0,0,w,h,gl.RGBA,gl.UNSIGNED_BYTE,pixels)}else{console.log("Warning, can not read back from WebGL framebuffer.");gl.bindFramebuffer(gl.FRAMEBUFFER,null);gl.deleteFramebuffer(fbo);return false}gl.bindFramebuffer(gl.FRAMEBUFFER,null);gl.deleteFramebuffer(fbo);var canvas=document.createElement("canvas");canvas.width=w;canvas.height=h;var cx=canvas.getContext("2d");var imd=cx.createImageData(w,h);imd.data.set(pixels);cx.putImageData(imd,0,0);ut._HTML.images[idx].image=canvas;return true}}if(ut._HTML.images[idx].isrt)return ut._HTML.images[idx].image&&ut._HTML.images[idx].width==w&&ut._HTML.images[idx].height==h;else return ut._HTML.images[idx].image&&ut._HTML.images[idx].image.naturalWidth===w&&ut._HTML.images[idx].image.naturalHeight===h};ut._HTML.readyCanvasForReadback=function(idx,w,h){if(!ut._HTML.ensureImageIsReadable(idx,w,h))return null;if(ut._HTML.images[idx].image instanceof HTMLCanvasElement){return ut._HTML.images[idx].image}else{var cvs=document.createElement("canvas");cvs.width=w;cvs.height=h;var cx=cvs.getContext("2d");var srcimg=ut._HTML.images[idx].image;cx.globalCompositeOperation="copy";cx.drawImage(srcimg,0,0,w,h);return cvs}};ut._HTML.loadWebPFallback=function(url,idx){function decode_base64(base64){var size=base64.length;while(base64.charCodeAt(size-1)==61)size--;var data=new Uint8Array(size*3>>2);for(var c,cPrev=0,s=6,d=0,b=0;b<size;cPrev=c,s=s+2&7){c=base64.charCodeAt(b++);c=c>=97?c-71:c>=65?c-65:c>=48?c+4:c==47?63:62;if(s<6)data[d++]=cPrev<<2+s|c>>4-s}return data}if(!url)return false;if(!(typeof WebPDecoder=="object"))return false;if(WebPDecoder.nativeSupport)return false;var webpCanvas;var webpPrefix="data:image/webp;base64,";if(!url.lastIndexOf(webpPrefix,0)){webpCanvas=document.createElement("canvas");WebPDecoder.decode(decode_base64(url.substring(webpPrefix.length)),webpCanvas);webpCanvas.naturalWidth=webpCanvas.width;webpCanvas.naturalHeight=webpCanvas.height;webpCanvas.complete=true;ut._HTML.initImage(idx);ut._HTML.images[idx].image=webpCanvas;return true}if(url.lastIndexOf("data:image/",0)&&url.match(/\.webp$/i)){webpCanvas=document.createElement("canvas");webpCanvas.naturalWidth=0;webpCanvas.naturalHeight=0;webpCanvas.complete=false;ut._HTML.initImage(idx);ut._HTML.images[idx].image=webpCanvas;var webpRequest=new XMLHttpRequest;webpRequest.responseType="arraybuffer";webpRequest.open("GET",url);webpRequest.onerror=function(){ut._HTML.images[idx].loaderror=true};webpRequest.onload=function(){WebPDecoder.decode(new Uint8Array(webpRequest.response),webpCanvas);webpCanvas.naturalWidth=webpCanvas.width;webpCanvas.naturalHeight=webpCanvas.height;webpCanvas.complete=true};webpRequest.send();return true}return false}}function _js_html_loadImage(colorName,maskName){colorName=colorName?UTF8ToString(colorName):null;maskName=maskName?UTF8ToString(maskName):null;if(colorName=="::white1x1"){colorName="data:image/gif;base64,R0lGODlhAQABAIAAAP7//wAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="}else if(colorName&&colorName.substring(0,9)=="ut-asset:"){colorName=UT_ASSETS[colorName.substring(9)]}if(maskName&&maskName.substring(0,9)=="ut-asset:"){maskName=UT_ASSETS[maskName.substring(9)]}var idx;for(var i=1;i<=ut._HTML.images.length;i++){if(!ut._HTML.images[i]){idx=i;break}}ut._HTML.initImage(idx);if(ut._HTML.loadWebPFallback(colorName,idx))return idx;if(colorName){var imgColor=new Image;var isjpg=!!colorName.match(/\.jpe?g$/i);ut._HTML.images[idx].image=imgColor;ut._HTML.images[idx].hasAlpha=!isjpg;imgColor.onerror=function(){ut._HTML.images[idx].loaderror=true};imgColor.src=colorName}if(maskName){var imgMask=new Image;ut._HTML.images[idx].mask=imgMask;ut._HTML.images[idx].hasAlpha=true;imgMask.onerror=function(){ut._HTML.images[idx].loaderror=true};imgMask.src=maskName}return idx}function _testBrowserCannotHandleOffsetsInUniformArrayViews(g){function b(c,t){var s=g.createShader(t);g.shaderSource(s,c);g.compileShader(s);return s}try{var p=g.createProgram();var sv=b("attribute vec4 p;void main(){gl_Position=p;}",g.VERTEX_SHADER);var sf=b("precision lowp float;uniform vec4 u;void main(){gl_FragColor=u;}",g.FRAGMENT_SHADER);g.attachShader(p,sv);g.attachShader(p,sf);g.linkProgram(p);var h=new Float32Array(8);h[4]=1;g.useProgram(p);var l=g.getUniformLocation(p,"u");g.uniform4fv(l,h.subarray(4,8));var r=!g.getUniform(p,l)[0];g.useProgram(null);g.deleteShader(sv);g.deleteShader(sf);g.deleteProgram(p);return r}catch(e){return false}}function _js_html_setCanvasSize(width,height,webgl){console.log("setCanvasSize",width,height,webgl?"gl":"2d");if(!width>0||!height>0)throw"Bad canvas size at init.";var canvas=ut._HTML.canvasElement;if(!canvas){canvas=document.getElementById("UT_CANVAS");if(canvas)console.log("Using user UT_CANVAS element.")}else{var waswebgl=ut._HTML.canvasMode=="webgl2"||ut._HTML.canvasMode=="webgl";if(webgl!=waswebgl){if(ut._HTML.freeAllGL)ut._HTML.freeAllGL();console.log("Rebuilding canvas for renderer change.");canvas.parentNode.removeChild(canvas);canvas=0}}if(!canvas){canvas=document.createElement("canvas");canvas.setAttribute("id","UT_CANVAS");canvas.setAttribute("style","touch-action: none;");canvas.setAttribute("tabindex","1");if(document.body){document.body.style.margin="0px";document.body.style.border="0";document.body.style.overflow="hidden";document.body.style.display="block";document.body.insertBefore(canvas,document.body.firstChild)}else{document.documentElement.appendChild(canvas)}}ut._HTML.canvasElement=canvas;canvas.width=width;canvas.height=height;if(webgl){ut._HTML.canvasContext=canvas.getContext("webgl2");if(!ut._HTML.canvasContext){ut._HTML.canvasContext=canvas.getContext("webgl");if(!ut._HTML.canvasContext){ut._HTML.canvasContext=canvas.getContext("experimental-webgl");if(!ut._HTML.canvasContext){console.log("WebGL context failed, falling back to canvas.");webgl=false}else{console.log("WebGL context ok, but experimental.");ut._HTML.canvasMode="webgl"}}else{ut._HTML.canvasMode="webgl";console.log("WebGL context is webgl1.")}if(ut._HTML.canvasContext){ut._HTML.browserCannotHandleOffsetsInUniformArrayViews=_testBrowserCannotHandleOffsetsInUniformArrayViews(ut._HTML.canvasContext)}}else{console.log("WebGL context is webgl2.");ut._HTML.canvasMode="webgl2"}}if(!webgl){ut._HTML.canvasContext=canvas.getContext("2d");ut._HTML.canvasMode="canvas"}else{canvas.addEventListener("webglcontextlost",function(event){event.preventDefault()},false)}window.addEventListener("focus",function(event){ut._HTML.focus=true});window.addEventListener("blur",function(event){ut._HTML.focus=false});canvas.focus();return webgl}function _js_initialize(){ut=ut||{};ut._HTML=ut._HTML||{};ut._HTML.videoSourceLoading={};ut._HTML.videoSourcePlaying={}}function _js_inputGetCanvasLost(){var inp=ut._HTML.input;var canvas=ut._HTML.canvasElement;return canvas!=inp.canvas}function _js_inputGetFocusLost(){var inp=ut._HTML.input;if(inp.focusLost){inp.focusLost=false;return true}return false}function _js_inputGetKeyStream(maxLen,destPtr){var inp=ut._HTML.input;return inp.getStream(inp.keyStream,maxLen,destPtr)}function _js_inputGetMouseStream(maxLen,destPtr){var inp=ut._HTML.input;return inp.getStream(inp.mouseStream,maxLen,destPtr)}function _js_inputGetTouchStream(maxLen,destPtr){var inp=ut._HTML.input;return inp.getStream(inp.touchStream,maxLen,destPtr)}function _js_inputInit(){ut._HTML=ut._HTML||{};ut._HTML.input={};var inp=ut._HTML.input;var canvas=ut._HTML.canvasElement;if(!canvas)return false;inp.getStream=function(stream,maxLen,destPtr){destPtr>>=2;var l=stream.length;if(l>maxLen)l=maxLen;for(var i=0;i<l;i++)HEAP32[destPtr+i]=stream[i];return l};inp.mouseEventFn=function(ev){var inp=ut._HTML.input;var eventType;var buttons=0;if(ev.type=="mouseup"){eventType=0;buttons=ev.button}else if(ev.type=="mousedown"){eventType=1;buttons=ev.button}else if(ev.type=="mousemove"){eventType=2}else return;var rect=inp.canvas.getBoundingClientRect();var x=ev.pageX-rect.left;var y=rect.bottom-1-ev.pageY;inp.mouseStream.push(eventType|0);inp.mouseStream.push(buttons|0);inp.mouseStream.push(x|0);inp.mouseStream.push(y|0);ev.preventDefault();ev.stopPropagation()};inp.touchEventFn=function(ev){var inp=ut._HTML.input;var eventType,x,y,touches=ev.changedTouches;var eventType;if(ev.type=="touchstart")eventType=1;else if(ev.type=="touchend")eventType=0;else if(ev.type=="touchcanceled")eventType=3;else eventType=2;var rect=inp.canvas.getBoundingClientRect();for(var i=0;i<touches.length;++i){var t=touches[i];var x=t.pageX-rect.left;var y=rect.bottom-1-t.pageY;inp.touchStream.push(eventType|0);inp.touchStream.push(t.identifier|0);inp.touchStream.push(x|0);inp.touchStream.push(y|0)}ev.preventDefault();ev.stopPropagation()};inp.keyEventFn=function(ev){var eventType;if(ev.type=="keydown")eventType=1;else if(ev.type=="keyup")eventType=0;else return;inp.keyStream.push(eventType|0);inp.keyStream.push(ev.keyCode|0)};inp.clickEventFn=function(){this.focus()};inp.focusoutEventFn=function(){var inp=ut._HTML.input;inp.focusLost=true};inp.mouseStream=[];inp.keyStream=[];inp.touchStream=[];inp.canvas=canvas;inp.focusLost=false;var events={};events["keydown"]=inp.keyEventFn;events["keyup"]=inp.keyEventFn;events["touchstart"]=events["touchend"]=events["touchmove"]=events["touchcancel"]=inp.touchEventFn;events["mousedown"]=events["mouseup"]=events["mousemove"]=inp.mouseEventFn;events["focusout"]=inp.focusoutEventFn;events["click"]=inp.clickEventFn;for(var ev in events)canvas.addEventListener(ev,events[ev]);return true}function _js_inputResetStreams(maxLen,destPtr){var inp=ut._HTML.input;inp.mouseStream.length=0;inp.keyStream.length=0;inp.touchStream.length=0}function _js_measureText(text,family,size,weight,italic,outWidth,outHeight){text=UTF8ToString(text);family=UTF8ToString(family);var useMeasureText=false;if(useMeasureText){if(!ut._HTML.canvasTextMeasureContext){ut._HTML.canvasTextMeasureCanvas=document.createElement("canvas");ut._HTML.canvasTextMeasureContext=ut._HTML.canvasTextMeasureCanvas.getContext("2d")}var context=ut._HTML.canvasTextMeasureContext;context.font=weight+" "+(italic?"italic ":"")+size+"pt"+" "+family;context.fillStyle="black";context.textAlign="left";context.textBaseline="bottom";var metrics=context.measureText(text);HEAPF32[outWidth>>2]=metrics.actualBoundingBoxLeft+metrics.actualBoundingBoxRight;HEAPF32[outHeight>>2]=metrics.actualBoundingBoxAscent+metrics.actualBoundingBoxDescent}else{var div=document.createElement("div");div.style.position="absolute";div.style.visibility="hidden";div.style.fontFamily=family;div.style.fontWeight=weight;var mult=1;if(size<5)mult=20;div.style.fontSize=size*mult+"pt";div.style.fontStyle=italic?"italic":"normal";div.style.textAlign="left";div.style.verticalAlign="bottom";div.style.color="black";var textWithWS=text.replace(/\s/g,"");div.innerText=textWithWS;document.body.appendChild(div);var rect=div.getBoundingClientRect();document.body.removeChild(div);var newCanvas=document.createElement("canvas");var ct=newCanvas.getContext("2d");ct.font=weight+" "+(italic?"italic ":"")+size*mult+"pt"+" "+family;ct.textAlign="left";ct.textBaseline="bottom";var wsWidth=ct.measureText(" ").width;var wsCount=text.split(" ").length-1;var tabWidth=ct.measureText("\t").width;var tabCount=text.split("\t").length-1;var resW=(rect.width+wsWidth*wsCount+tabCount*tabWidth)/mult;var resH=rect.height/mult;HEAPF32[outWidth>>2]=(rect.width+wsWidth*wsCount+tabCount*tabWidth)/mult;HEAPF32[outHeight>>2]=rect.height/mult}}function _js_remove_video_element(index){var videoElement=document.getElementById("video-entity-"+index);if(videoElement!=="undefined"){document.body.removeChild(videoElement);ut._HTML.videoSourceLoading[index]=null;ut._HTML.videoSourcePlaying[index]=null}}function utf16_to_js_string(ptr){var str="";ptr>>=1;while(1){var codeUnit=HEAP16[ptr++];if(!codeUnit)return str;str+=String.fromCharCode(codeUnit)}}function _js_renderTextTo2DCanvas(text,family,size,weight,italic,r,g,b,a,width,height){text=utf16_to_js_string(text);var font=size+"pt"+" "+utf16_to_js_string(family);var context=ut._HTML.canvasContext;context.font=weight+" "+(italic?"italic ":"")+font;context.fillStyle="rgb("+(r|0)+","+(g|0)+","+(b|0)+")";context.globalAlpha=a/255;context.textAlign="center";context.textBaseline="middle";context.fillText(text,width/2,height/2)}function _js_texImage2D_from_html_image(htmlImageId){GLctx["texImage2D"](3553,0,6408,6408,5121,ut._HTML.images[htmlImageId].image)}function _js_texImage2D_from_html_text(text,family,fontSize,weight,italic,labelWidth,labelHeight){var font=fontSize.toString()+"pt "+utf16_to_js_string(family);var newFont=weight.toString()+" "+(italic?"italic ":"")+font;var textCanvas=window.document.createElement("canvas");textCanvas.width=labelWidth;textCanvas.height=labelHeight;var context=textCanvas.getContext("2d");context.fillStyle="white";context.font=newFont;context.textAlign="center";context.textBaseline="middle";context.fillText(utf16_to_js_string(text),labelWidth/2,labelHeight/2);GLctx["texImage2D"](3553,0,6408,6408,5121,textCanvas)}function _llvm_exp2_f32(x){return Math.pow(2,x)}function _llvm_exp2_f64(a0){return _llvm_exp2_f32(a0)}function _llvm_trap(){abort("trap!")}function _emscripten_memcpy_big(dest,src,num){HEAPU8.set(HEAPU8.subarray(src,src+num),dest)}function _emscripten_get_heap_size(){return TOTAL_MEMORY}Fetch.staticInit();var GLctx;GL.init();var ut;var asmGlobalArg={"Math":Math,"Int8Array":Int8Array,"Int16Array":Int16Array,"Int32Array":Int32Array,"Uint8Array":Uint8Array,"Uint16Array":Uint16Array,"Float32Array":Float32Array,"Float64Array":Float64Array,"NaN":NaN,Infinity:Infinity};var asmLibraryArg={"a":abort,"b":setTempRet0,"c":getTempRet0,"d":___syscall140,"e":___syscall146,"f":___syscall4,"g":___syscall54,"h":___syscall6,"i":__emscripten_fetch_xhr,"j":__emscripten_get_fetch_work_queue,"k":__findCanvasEventTarget,"l":__findEventTarget,"m":__glGenObject,"n":__maybeCStringToJsString,"o":_abort,"p":_emscripten_asm_const_async_on_main_thread_v,"q":_emscripten_asm_const_async_on_main_thread_vdddd,"r":_emscripten_asm_const_sync_on_main_thread_i,"s":_emscripten_get_heap_size,"t":_emscripten_is_webgl_context_lost,"u":_emscripten_memcpy_big,"v":_emscripten_performance_now,"w":_emscripten_request_animation_frame_loop,"x":_emscripten_start_fetch,"y":_emscripten_throw_string,"z":_emscripten_webgl_create_context,"A":_emscripten_webgl_do_create_context,"B":_emscripten_webgl_init_context_attributes,"C":_emscripten_webgl_make_context_current,"D":_exit,"E":_glAttachShader,"F":_glBindAttribLocation,"G":_glBindBuffer,"H":_glBindTexture,"I":_glBlendFuncSeparate,"J":_glBufferData,"K":_glBufferSubData,"L":_glClear,"M":_glClearColor,"N":_glCompileShader,"O":_glCreateProgram,"P":_glCreateShader,"Q":_glDeleteProgram,"R":_glDeleteShader,"S":_glDeleteTextures,"T":_glDisable,"U":_glDisableVertexAttribArray,"V":_glDrawArrays,"W":_glDrawElements,"X":_glEnable,"Y":_glEnableVertexAttribArray,"Z":_glGenBuffers,"_":_glGenTextures,"$":_glGetProgramInfoLog,"aa":_glGetProgramiv,"ab":_glGetShaderInfoLog,"ac":_glGetShaderiv,"ad":_glGetUniformLocation,"ae":_glLinkProgram,"af":_glPixelStorei,"ag":_glScissor,"ah":_glShaderSource,"ai":_glTexParameteri,"aj":_glUniform1i,"ak":_glUniform3fv,"al":_glUniform4fv,"am":_glUniformMatrix3fv,"an":_glUseProgram,"ao":_glVertexAttribPointer,"ap":_glViewport,"aq":_js_canvasBlendingAndSmoothing,"ar":_js_canvasClear,"as":_js_canvasInit,"at":_js_canvasMakePattern,"au":_js_canvasMakeTintedSprite,"av":_js_canvasReleaseTintedSprite,"aw":_js_canvasRenderMultipleSliced,"ax":_js_canvasRenderNormalSpriteTinted,"ay":_js_canvasRenderNormalSpriteWhite,"az":_js_canvasRenderPatternSprite,"aA":_js_canvasSetTransformOnly,"aB":_js_check_isPlaying,"aC":_js_check_loading,"aD":_js_create_video_element,"aE":_js_getCurrentTime,"aF":_js_html_audioCheckLoad,"aG":_js_html_audioFree,"aH":_js_html_audioIsPlaying,"aI":_js_html_audioIsUnlocked,"aJ":_js_html_audioPause,"aK":_js_html_audioPlay,"aL":_js_html_audioResume,"aM":_js_html_audioStartLoadFile,"aN":_js_html_audioStop,"aO":_js_html_audioUnlock,"aP":_js_html_checkLoadImage,"aQ":_js_html_extractAlphaFromImage,"aR":_js_html_finishLoadImage,"aS":_js_html_freeImage,"aT":_js_html_getCanvasSize,"aU":_js_html_getFrameSize,"aV":_js_html_getScreenSize,"aW":_js_html_init,"aX":_js_html_initAudio,"aY":_js_html_initImageLoading,"aZ":_js_html_loadImage,"a_":_js_html_setCanvasSize,"a$":_js_initialize,"ba":_js_inputGetCanvasLost,"bb":_js_inputGetFocusLost,"bc":_js_inputGetKeyStream,"bd":_js_inputGetMouseStream,"be":_js_inputGetTouchStream,"bf":_js_inputInit,"bg":_js_inputResetStreams,"bh":_js_measureText,"bi":_js_remove_video_element,"bj":_js_renderTextTo2DCanvas,"bk":_js_texImage2D_from_html_image,"bl":_js_texImage2D_from_html_text,"bm":_llvm_exp2_f32,"bn":_llvm_exp2_f64,"bo":_llvm_trap,"bp":_testBrowserCannotHandleOffsetsInUniformArrayViews,"bq":flush_NO_FILESYSTEM,"br":utf16_to_js_string,"bs":tempDoublePtr,"bt":DYNAMICTOP_PTR};// EMSCRIPTEN_START_ASM
var asm=Module["asm"]// EMSCRIPTEN_END_ASM
(asmGlobalArg,asmLibraryArg,buffer);var _SendMessage=asm["_SendMessage"];var ___muldi3=asm["___muldi3"];var ___udivdi3=asm["___udivdi3"];var _bitshift64Ashr=asm["_bitshift64Ashr"];var _bitshift64Lshr=asm["_bitshift64Lshr"];var _bitshift64Shl=asm["_bitshift64Shl"];var _emscripten_is_main_browser_thread=asm["_emscripten_is_main_browser_thread"];var _free=asm["_free"];var _i64Add=asm["_i64Add"];var _i64Subtract=asm["_i64Subtract"];var _main=asm["_main"];var _malloc=asm["_malloc"];var _memcpy=asm["_memcpy"];var _memmove=asm["_memmove"];var _memset=asm["_memset"];var _sbrk=asm["_sbrk"];var _strlen=asm["_strlen"];var globalCtors=asm["globalCtors"];var dynCall_dddd=asm["dynCall_dddd"];var dynCall_ddii=asm["dynCall_ddii"];var dynCall_di=asm["dynCall_di"];var dynCall_diddd=asm["dynCall_diddd"];var dynCall_didii=asm["dynCall_didii"];var dynCall_dii=asm["dynCall_dii"];var dynCall_i=asm["dynCall_i"];var dynCall_idi=asm["dynCall_idi"];var dynCall_ii=asm["dynCall_ii"];var dynCall_iii=asm["dynCall_iii"];var dynCall_iiii=asm["dynCall_iiii"];var dynCall_iiiii=asm["dynCall_iiiii"];var dynCall_iiiiiiiii=asm["dynCall_iiiiiiiii"];var dynCall_v=asm["dynCall_v"];var dynCall_vi=asm["dynCall_vi"];var dynCall_vidii=asm["dynCall_vidii"];var dynCall_vii=asm["dynCall_vii"];var dynCall_viidii=asm["dynCall_viidii"];var dynCall_viii=asm["dynCall_viii"];var dynCall_viiid=asm["dynCall_viiid"];var dynCall_viiii=asm["dynCall_viiii"];var dynCall_viiiid=asm["dynCall_viiiid"];var dynCall_viiiii=asm["dynCall_viiiii"];var dynCall_viiiiii=asm["dynCall_viiiiii"];var dynCall_viiiiiii=asm["dynCall_viiiiiii"];var dynCall_viiiiiiii=asm["dynCall_viiiiiiii"];function run(){var ret=_main()}function initRuntime(asm){asm["globalCtors"]()}initRuntime(asm);ready();

